<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="shortcut icon" href="/static/img/favicon.ico" />
        <title>Dubbox的rest风格调用例子 - Java及相关开源技术博客</title>
        <meta name="author" content="Mixfate博客" />
        <meta name="description" content="Mixfate博客,开源技术博客,IT 博客,java技术,spring开源技术,dubbo分布式架构,maven工具" />
        <meta name="keywords" content="Dubbox的rest风格调用例子, Java及相关开源技术博客, spring, dubbo, webservice" />

        <meta content="0" property="fb:app_id">
        <meta content="Java及相关开源技术博客" property="og:site_name">
        
          <meta content="Dubbox的rest风格调用例子" property="og:title">
        
        
          <meta content="article" property="og:type">
        
        
          <meta content="Mixfate博客,开源技术博客,IT 博客,java技术,spring开源技术,dubbo分布式架构,maven工具" property="og:description">
        
        
          <meta content="http://www.mixfate.com/spring/dubbo/webservice/2016/05/02/dubbox-restful.html" property="og:url">
        
        
          <meta content="2016-05-02T20:33:01+08:00" property="article:published_time">
          <meta content="http://www.mixfate.com/about/" property="article:author">
        
        
          <meta content="http://www.mixfate.com/static/img/logo-high-resolution.png" property="og:image">
        
        
          
          <meta content="spring" property="article:section">
          
        
        
          
        
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@\#">
        <meta name="twitter:creator" content="@\#">
        
          <meta name="twitter:title" content="Dubbox的rest风格调用例子">
        
        
          <meta name="twitter:url" content="http://www.mixfate.com/spring/dubbo/webservice/2016/05/02/dubbox-restful.html">
        
        
          <meta name="twitter:description" content="Mixfate博客,开源技术博客,IT 博客,java技术,spring开源技术,dubbo分布式架构,maven工具">
        
        

        <link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml">
        <!-- Custom Fonts -->
        <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">

        <!-- FontAwesome icons -->
        <link rel="stylesheet" href="https://use.fontawesome.com/74dfc6cf47.css">

        <!-- Core BootStrap CSS -->
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <!-- Material Design CSS -->
        <link rel="stylesheet" href="http://www.mixfate.com/static/css/bootstrap-material-design.min.css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="http://www.mixfate.com/static/css/syntax.css">

        <!-- Custom CSS -->        
        <link rel="stylesheet" href="http://www.mixfate.com/static/css/thickbox.css">
        <link rel="stylesheet" href="http://www.mixfate.com/static/css/main.css">
        <link rel="stylesheet" href="http://www.mixfate.com/static/css/projects.css">
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UB-72862926-2', 'auto');
  ga('send', 'pageview');

</script>
    </head>

    <body class="home overflow-hidden">
    <!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
        your browser</a> to improve your experience.</p>
    <![endif]-->
    <div class="header-panel shadow-z-2">
    <div class="container">
    <div class="row">
            <div class="col-md-3 col-sm-4 col-xs-12">
      <div class="row-picture">
        <img id="about" class="logo-img" src="http://www.mixfate.com/static/img/avatar.png" height="75px" width="75px">
      </div>
      <div class="row-details">
      <h4 class="list-group-item-heading">Mixfate博客</h4>
      <p class="list-group-item-text">技术乐园</p>
      <div class="social-icons">
	
        <a class="icon" href=""><i class="fa fa-facebook"></i></a>
    
        <a class="icon" href=""><i class="fa fa-skype"></i></a>
    
        <a class="icon" href=""><i class="fa fa-twitter"></i></a>
    
        <a class="icon" href=""><i class="fa fa-linkedin"></i></a>
    
        <a class="icon" href=""><i class="fa fa-stack-exchange"></i></a>
    
</div>
      </div>
        <div class="navbar-header pull-right">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <i class="fa fa-2x fa-bars"></i>
            </button>
        </div>
      </div>
      <div class="col-md-9 col-sm-8 col-xs-12">
      <h2 class="blog-title-pro">Dubbox的rest风格调用例子</h2>
      <p class="info">
      
      <span class="time">2016/05/02</span>
      
      
    <span class="categories">
        &raquo; <a href="/category/spring">spring</a>, <a href="/category/dubbo">dubbo</a>, <a href="/category/webservice">webservice</a>
    </span>
    
      </p>
      </div>
      </div>
      </div>
    </div>
    <div class="container main outer">
        <div class="row">
            <div class="col-md-3 col-xs-12">
                    <nav class="menu">
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="list-separator nav navbar-nav well well-primary post">

	
	
	
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12 current-menu-item dubbox-restful.html"><a href="/"><i class="fa fa-home"></i> 首页</a></li>

	
	
	
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  dubbox-restful.html"><a href="/category/java"><i class="fa fa-desktop"></i> 分类</a></li>

	
	
	
	
	<li class="col-lg-12 col-md-12 col-sm-4 col-xs-12  dubbox-restful.html"><a href="/about/"><i class="fa fa-comments"></i> 关于</a></li>

</ul>
    </div>
    </nav>

				
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- size_300x250 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:280px;height:250px"
     data-ad-client="ca-pub-4309621458849374"
     data-ad-slot="8169524649"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
            </div> <!-- end /.col-md-3 -->

            <div class="col-md-9 col-xs-12 full">
                <div class="post-content well">
<article class="content">
    <div class="post" style="font-size: 12px;"><h2 id="dubboxrest">Dubbox的rest风格调用例子</h2>

<p>Dubbo是一个被国内很多互联网公司广泛使用的开源分布式服务框架，即使从国际视野来看应该也是一个非常全面的SOA基础框架。
作为一个重要的技术研究课题，在当当网我们根据自身的需求，为Dubbo实现了一些新的功能，并将其命名为Dubbox（即Dubbo eXtensions）</p>

<p>本例中使用jetty server，若本例中其中使用某些alibaba的jar包无法在网上下载，可直接下载源码
git clone https://github.com/dangdangdotcom/dubbox 将其安装到本地库中。</p>

<p>1、编写pom.xml，内容较多，其中包括jetty等</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>com.hode<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>dubbox<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span><span class="sb">

	&lt;properties&gt;
		&lt;spring.version&gt;4.0.2.RELEASE&lt;/spring.version&gt;
		&lt;log4j.version&gt;1.2.17&lt;/log4j.version&gt;
	&lt;/properties&gt;
	
	&lt;dependencies&gt;
		
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-tx&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-web&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		
		&lt;dependency&gt;
			&lt;groupId&gt;log4j&lt;/groupId&gt;
			&lt;artifactId&gt;log4j&lt;/artifactId&gt;
			&lt;version&gt;${log4j.version}&lt;/version&gt;
		&lt;/dependency&gt;
		
		&lt;dependency&gt;
			&lt;groupId&gt;org.slf4j&lt;/groupId&gt;
			&lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
			&lt;version&gt;1.6.1&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.slf4j&lt;/groupId&gt;
			&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
			&lt;version&gt;1.6.1&lt;/version&gt;
		&lt;/dependency&gt;
		
		&lt;dependency&gt;
            &lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;
            &lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;
            &lt;version&gt;2.0.1&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;
            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;
            &lt;version&gt;1.2&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;
            &lt;version&gt;1.9.12&lt;/version&gt;
        &lt;/dependency&gt;
		
		&lt;!--  dubbo start --&gt;
		&lt;dependency&gt; 
		    &lt;groupId&gt;com.alibaba&lt;/groupId&gt; 
		    &lt;artifactId&gt;dubbo&lt;/artifactId&gt; 
		    &lt;version&gt;2.8.4&lt;/version&gt; 
		    &lt;exclusions&gt; 
		        &lt;exclusion&gt; 
		            &lt;groupId&gt;org.springframework&lt;/groupId&gt; 
		            &lt;artifactId&gt;spring&lt;/artifactId&gt; 
		        &lt;/exclusion&gt; 
		    &lt;/exclusions&gt; 
		&lt;/dependency&gt;
		
		&lt;!--  dubbo end  --&gt;
		
		&lt;!-- zookeeper start --&gt; 
		&lt;dependency&gt;
			&lt;groupId&gt;org.apache.zookeeper&lt;/groupId&gt;
			&lt;artifactId&gt;zookeeper&lt;/artifactId&gt;
			&lt;version&gt;3.5.0-alpha&lt;/version&gt;
		&lt;/dependency&gt;
		
		&lt;dependency&gt;
		    &lt;groupId&gt;com.101tec&lt;/groupId&gt;
		    &lt;artifactId&gt;zkclient&lt;/artifactId&gt;
		    &lt;version&gt;0.8&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;!-- zookeeper end --&gt;
		
		&lt;dependency&gt;
            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
            &lt;artifactId&gt;resteasy-jaxrs&lt;/artifactId&gt;
            &lt;version&gt;3.0.10.Final&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
            &lt;artifactId&gt;resteasy-client&lt;/artifactId&gt;
            &lt;version&gt;3.0.10.Final&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
            &lt;artifactId&gt;resteasy-netty&lt;/artifactId&gt;
            &lt;version&gt;3.0.10.Final&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
            &lt;artifactId&gt;resteasy-jdk-http&lt;/artifactId&gt;
            &lt;version&gt;3.0.10.Final&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
            &lt;artifactId&gt;resteasy-jackson-provider&lt;/artifactId&gt;
            &lt;version&gt;3.0.10.Final&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
            &lt;artifactId&gt;resteasy-jaxb-provider&lt;/artifactId&gt;
            &lt;version&gt;3.0.10.Final&lt;/version&gt;
        &lt;/dependency&gt;
        
        &lt;dependency&gt;
            &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;
            &lt;artifactId&gt;jetty&lt;/artifactId&gt;
            &lt;version&gt;6.1.26&lt;/version&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;
                    &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
        
        &lt;dependency&gt;
            &lt;groupId&gt;javax.validation&lt;/groupId&gt;
            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;
            &lt;version&gt;1.0.0.GA&lt;/version&gt;
        &lt;/dependency&gt;
		
		&lt;!-- jetty begin --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
			&lt;artifactId&gt;jetty-server&lt;/artifactId&gt;
			&lt;version&gt;8.0.0.M3&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
			&lt;artifactId&gt;jetty-webapp&lt;/artifactId&gt;
			&lt;version&gt;8.0.0.M3&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
			&lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;
			&lt;version&gt;8.0.0.M3&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
			&lt;artifactId&gt;jetty-io&lt;/artifactId&gt;
			&lt;version&gt;8.0.0.M3&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
			&lt;artifactId&gt;jetty-util&lt;/artifactId&gt;
			&lt;version&gt;8.0.0.M3&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
		
		&lt;dependency&gt;
			&lt;groupId&gt;org.mortbay.jetty&lt;/groupId&gt;
			&lt;artifactId&gt;jsp-2.1-glassfish&lt;/artifactId&gt;
			&lt;version&gt;2.1.v20100127&lt;/version&gt;
			&lt;scope&gt;provided&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;!-- jetty end --&gt;
		
	&lt;/dependencies&gt;

	&lt;build&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
				&lt;version&gt;3.1&lt;/version&gt;
				&lt;configuration&gt;
					&lt;source&gt;1.8&lt;/source&gt;
					&lt;target&gt;1.8&lt;/target&gt;
					&lt;encoding&gt;UTF-8&lt;/encoding&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/build&gt;
</span><span class="nt">&lt;/project&gt;</span>
</code></pre>
</div>

<p>2、在目录webapp/WEB-INF中创建文件 web.xml，内容如下</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
&lt;web-app id="WebApp_ID" version="2.4"
	xmlns="http://java.sun.mrm/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://java.sun.mrm/xml/ns/j2ee http://java.sun.mrm/xml/ns/j2ee/web-app_2_4.xsd"&gt;<span class="sb">

	&lt;display-name&gt;dubbox restful&lt;/display-name&gt;
    
    &lt;context-param&gt;
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
        &lt;param-value&gt;classpath*:applicationContext-provider.xml&lt;/param-value&gt;
    &lt;/context-param&gt;

    &lt;!--this listener must be defined before the spring listener--&gt;
    &lt;listener&gt;
        &lt;listener-class&gt;com.alibaba.dubbo.remoting.http.servlet.BootstrapListener&lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;listener&gt;
        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
    &lt;/listener&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.alibaba.dubbo.remoting.http.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/services/*&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

</span><span class="nt">&lt;/web-app&gt;</span><span class="sb">


</span></code></pre>
</div>

<p>3、编写服务接口DemoService，服务类DemoServiceImpl，一个VO类User以及JettyServer</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>package com.hode.dubbo.provider;

import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import com.hode.model.User;

@Path("demo")
@Consumes({MediaType.APPLICATION_JSON, MediaType.TEXT_XML})
@Produces({MediaType.APPLICATION_JSON + ";"+MediaType.CHARSET_PARAMETER+"=UTF-8",MediaType.TEXT_XML+";"+MediaType.CHARSET_PARAMETER+"=UTF-8"})
public interface DemoService {<span class="sb">

	@POST
    @Path("sayHello")
	public String sayHello(String name);
	
	@POST
    @Path("checkUser")
	public User checkUser(User u);
	
</span>}

</code></pre>
</div>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>package com.hode.dubbo.provider.impl;

import org.apache.log4j.Logger;

import com.hode.dubbo.provider.DemoService;
import com.hode.model.User;

public class DemoServiceImpl implements DemoService {<span class="sb">

	private Logger log = Logger.getLogger(getClass());
	
	@Override
	public String sayHello(String name) {
		log.info("name = "+name);
		return "name is "+name;
	}

	@Override
	public User checkUser(User u) {
		log.info(u);
		u = new User();
		u.setName("hode");
		u.setAge(22);
		u.setHeight(168.0);
		return u;
	}

</span>}

</code></pre>
</div>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>package com.hode.model;

import java.io.Serializable;
import java.util.Date;

public class User implements Serializable{<span class="sb">

	private static final long serialVersionUID = -4144338689776613101L;

	private String name;
	
	private int age;
	
	private double height;
	
	private Date birthday;

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public int getAge() {
		return age;
	}

	public void setAge(int age) {
		this.age = age;
	}

	public double getHeight() {
		return height;
	}

	public void setHeight(double height) {
		this.height = height;
	}

	public Date getBirthday() {
		return birthday;
	}

	public void setBirthday(Date birthday) {
		this.birthday = birthday;
	}

	@Override
	public String toString() {
		return "User [name=" + name + ", age=" + age + ", height=" + height
				+ ", birthday=" + birthday + "]";
	}
	
</span>}

</code></pre>
</div>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>package com.hode;

import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.webapp.WebAppContext;<span class="sb">


</span>public class JettyServer {<span class="sb">

	public static void main(String[] args) throws Exception{
		Server server = new Server(80);
		WebAppContext context = new WebAppContext();  
        context.setContextPath("/");  
        context.setWar("src/main/webapp");  
        server.setHandler(context);  
        server.start();  
        server.join();
	}

</span>}

</code></pre>
</div>

<p>4、编写spring配置文件applicationContext-provider.xml及log4j.properties，
其中使用了部分dubbox demo项目中的extension包内的类，可拷贝进去
代码如下</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://code.alibabatech.com/schema/dubbo http://code.alibabatech.com/schema/dubbo/dubbo.xsd "&gt;
	
	<span class="c">&lt;!-- Provider信息 --&gt;</span>
	<span class="nt">&lt;dubbo:application</span> <span class="na">name=</span><span class="s">"dubbox-hode-provider"</span> <span class="na">owner=</span><span class="s">"programer"</span> <span class="na">organization=</span><span class="s">"dubbox"</span> <span class="nt">/&gt;</span>
	
	<span class="c">&lt;!-- 使用zookeeper注册中心暴露服务地址 --&gt;</span>
	<span class="nt">&lt;dubbo:registry</span> <span class="na">address=</span><span class="s">"zookeeper://192.167.48.128:2181"</span> <span class="nt">/&gt;</span>
	
	<span class="nt">&lt;dubbo:annotation</span> <span class="na">package=</span><span class="s">"com.hode.dubbo.provider"</span> <span class="nt">/&gt;</span>
	
	<span class="c">&lt;!-- 定义rest协议,本例演示使用jetty --&gt;</span>
	&lt;dubbo:protocol name="rest" port="8888" threads="500" contextpath="services" server="jetty" accepts="500"
                    extension="com.alibaba.dubbo.demo.extension.TraceInterceptor,
                    com.alibaba.dubbo.demo.extension.TraceFilter,
                    com.alibaba.dubbo.demo.extension.ClientTraceFilter,
                    com.alibaba.dubbo.demo.extension.DynamicTraceBinding,
                    com.alibaba.dubbo.demo.extension.CustomExceptionMapper,
                    com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter"/&gt;
                    
	<span class="c">&lt;!-- 声明需要暴露的服务接口 --&gt;</span>
	<span class="nt">&lt;dubbo:service</span> <span class="na">interface=</span><span class="s">"com.hode.dubbo.provider.DemoService"</span> <span class="na">ref=</span><span class="s">"demoService"</span>  <span class="na">protocol=</span><span class="s">"rest"</span><span class="nt">/&gt;</span>
	
	<span class="c">&lt;!-- 具体的实现bean --&gt;</span>
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"demoService"</span> <span class="na">class=</span><span class="s">"com.hode.dubbo.provider.impl.DemoServiceImpl"</span> <span class="nt">/&gt;</span>
	
	
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>log4j.rootLogger=INFO,Console
log4j.appender.Console=org.apache.log4j.ConsoleAppender
log4j.appender.Console.layout=org.apache.log4j.PatternLayout
log4j.appender.Console.layout.ConversionPattern=%-4r %d{yyyy-MM-dd HH:mm:ss,SSS} <span class="p">[</span><span class="nv">%t</span><span class="p">]</span> %-5p %c %x - %m%n

log4j.logger.com.hode = DEBUG
log4j.logger.com.alibaba = DEBUG
</code></pre>
</div>

<p>5、最后编写一个测试类，使用resttemplate完成测试，测试代码如下</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>package dubbox;

import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.MediaType;
import org.springframework.web.client.RestTemplate;

import com.hode.model.User;

public class RestClientTest {<span class="sb">

	static RestTemplate rt = new RestTemplate();
	
	public static void main(String[] args) {
		sayHello();
		checkUser();
	}
	
	public static void checkUser(){
		String url = "http://localhost:8888/services/demo/checkUser.json";
		User u = new User();
		u.setName("test-hode");
		HttpHeaders headers = new HttpHeaders();
		headers.setContentType(MediaType.APPLICATION_JSON);
		HttpEntity request = new HttpEntity(u, headers);
		User result = rt.postForObject(url, request, User.class);
		
		System.out.println(result);
	}
	
	public static void sayHello(){
		String url = "http://localhost:8888/services/demo/sayHello.json";
		HttpHeaders headers = new HttpHeaders();
		headers.setContentType(MediaType.APPLICATION_JSON);
		HttpEntity request = new HttpEntity("hode", headers);
		String result = rt.postForObject(url, request, String.class);
		
		System.out.println(result);
	}

</span>}

</code></pre>
</div>

<p>6、启动并测试</p>

<p>先运行JettyServer，再运行RestClientTest，查看结果</p>

<p>截取部分日志如下</p>

<div class="language-markdown highlighter-rouge"><pre class="highlight"><code>Request filter invoked
10965 2016-04-08 18:25:40,284 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The HTTP headers are: 
Accept: application/json, text/plain, application/json, application/<span class="ge">*+json, *</span>/<span class="err">*</span>
Accept-Charset: big5, big5-hkscs, cesu-8, euc-jp, euc-kr, gb18030, gb2312, gbk, ibm-thai, ibm00858, ibm01140, ibm01141, ibm01142, ibm01143, ibm01144, ibm01145, ibm01146, ibm01147, ibm01148, ibm01149, ibm037, ibm1026, ibm1047, ibm273, ibm277, ibm278, ibm280, ibm284, ibm285, ibm290, ibm297, ibm420, ibm424, ibm437, ibm500, ibm775, ibm850, ibm852, ibm855, ibm857, ibm860, ibm861, ibm862, ibm863, ibm864, ibm865, ibm866, ibm868, ibm869, ibm870, ibm871, ibm918, iso-2022-cn, iso-2022-jp, iso-2022-jp-2, iso-2022-kr, iso-8859-1, iso-8859-13, iso-8859-15, iso-8859-2, iso-8859-3, iso-8859-4, iso-8859-5, iso-8859-6, iso-8859-7, iso-8859-8, iso-8859-9, jis_x0201, jis_x0212-1990, koi8-r, koi8-u, shift_jis, tis-620, us-ascii, utf-16, utf-16be, utf-16le, utf-32, utf-32be, utf-32le, utf-8, windows-1250, windows-1251, windows-1252, windows-1253, windows-1254, windows-1255, windows-1256, windows-1257, windows-1258, windows-31j, x-big5-hkscs-2001, x-big5-solaris, x-euc-jp-linux, x-euc-tw, x-eucjp-open, x-ibm1006, x-ibm1025, x-ibm1046, x-ibm1097, x-ibm1098, x-ibm1112, x-ibm1122, x-ibm1123, x-ibm1124, x-ibm1166, x-ibm1364, x-ibm1381, x-ibm1383, x-ibm300, x-ibm33722, x-ibm737, x-ibm833, x-ibm834, x-ibm856, x-ibm874, x-ibm875, x-ibm921, x-ibm922, x-ibm930, x-ibm933, x-ibm935, x-ibm937, x-ibm939, x-ibm942, x-ibm942c, x-ibm943, x-ibm943c, x-ibm948, x-ibm949, x-ibm949c, x-ibm950, x-ibm964, x-ibm970, x-iscii91, x-iso-2022-cn-cns, x-iso-2022-cn-gb, x-iso-8859-11, x-jis0208, x-jisautodetect, x-johab, x-macarabic, x-maccentraleurope, x-maccroatian, x-maccyrillic, x-macdingbat, x-macgreek, x-machebrew, x-maciceland, x-macroman, x-macromania, x-macsymbol, x-macthai, x-macturkish, x-macukraine, x-ms932_0213, x-ms950-hkscs, x-ms950-hkscs-xp, x-mswin-936, x-pck, x-sjis_0213, x-utf-16le-bom, x-utf-32be-bom, x-utf-32le-bom, x-windows-50220, x-windows-50221, x-windows-874, x-windows-949, x-windows-950, x-windows-iso2022jp
Connection: keep-alive
Content-Length: 4
Content-Type: application/json
Host: localhost:8888
User-Agent: Java/1.8.0_66
, dubbo version: 2.8.4, current host: 127.0.0.1
Reader interceptor invoked
Dynamic reader interceptor invoked
10966 2016-04-08 18:25:40,285 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The contents of request body is: 
hode
, dubbo version: 2.8.4, current host: 127.0.0.1
10966 2016-04-08 18:25:40,285 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.hode.dubbo.provider.impl.DemoServiceImpl  - name = hode
10967 2016-04-08 18:25:40,286 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The HTTP headers are: 
Content-Type: application/json;charset=UTF-8
, dubbo version: 2.8.4, current host: 127.0.0.1
Response filter invoked
Writer interceptor invoked
Dynamic writer interceptor invoked
10967 2016-04-08 18:25:40,286 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The contents of response body is: 
name is hode
, dubbo version: 2.8.4, current host: 127.0.0.1
Request filter invoked
11066 2016-04-08 18:25:40,385 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The HTTP headers are: 
Accept: application/json, application/json, application/<span class="err">*</span>+json
Connection: keep-alive
Content-Length: 57
Content-Type: application/json
Host: localhost:8888
User-Agent: Java/1.8.0_66
, dubbo version: 2.8.4, current host: 127.0.0.1
Reader interceptor invoked
Dynamic reader interceptor invoked
11069 2016-04-08 18:25:40,388 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The contents of request body is: 
{"name":"test-hode","age":0,"height":0.0,"birthday":null}
, dubbo version: 2.8.4, current host: 127.0.0.1
11070 2016-04-08 18:25:40,389 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.hode.dubbo.provider.impl.DemoServiceImpl  - User <span class="p">[</span><span class="nv">name=test-hode, age=0, height=0.0, birthday=null</span><span class="p">]</span>
11070 2016-04-08 18:25:40,389 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The HTTP headers are: 
Content-Type: application/json;charset=UTF-8
, dubbo version: 2.8.4, current host: 127.0.0.1
Response filter invoked
Writer interceptor invoked
Dynamic writer interceptor invoked
11072 2016-04-08 18:25:40,391 <span class="p">[</span><span class="nv">156710276@qtp-1193471756-492</span><span class="p">]</span> INFO  com.alibaba.dubbo.rpc.protocol.rest.support.LoggingFilter  -  <span class="p">[</span><span class="nv">DUBBO</span><span class="p">]</span> The contents of response body is: 
{"name":"hode","age":22,"height":168.0,"birthday":null}
, dubbo version: 2.8.4, current host: 127.0.0.1

</code></pre>
</div>

<h4><a href="/rar/dubbox-restful.rar"><b>Demo代码下载</b></a></h4>

<p>结束。</p>
</div>
	
	<!--
    <hr />
    { % include share-page.html % }
	-->
</article>
<hr />


    
    
        
            
                
                <div class="panel-body">
                <h5>相关博客</h5>
                <ul>
                
                <li class="relatedPost" style="font-size: 12px;">
                    <a href="http://www.mixfate.com/spring/2016/05/20/spring-cas-4.2.x.html">CAS 4.2.x webapp使用介绍</a>
                    
                        <small>(所属分类: <a href="/category/spring">spring</a>)</small>
                    
                </li>
                
                
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
                
                <li class="relatedPost" style="font-size: 12px;">
                    <a href="http://www.mixfate.com/tools/spring/2016/05/19/gradle-spring-project.html">Gradle构建spring项目</a>
                    
                        <small>(所属分类: <a href="/category/tools">tools</a>, <a href="/category/spring">spring</a>)</small>
                    
                </li>
                
                
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
                
                <li class="relatedPost" style="font-size: 12px;">
                    <a href="http://www.mixfate.com/spring/java/2016/05/17/spring-security-4.html">Spring Security配置使用介绍（四）增加验证码</a>
                    
                        <small>(所属分类: <a href="/category/spring">spring</a>, <a href="/category/java">java</a>)</small>
                    
                </li>
                
                
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
                
                <li class="relatedPost" style="font-size: 12px;">
                    <a href="http://www.mixfate.com/spring/java/2016/05/16/spring-security-3.html">Spring Security配置使用介绍（三）暴力动态配置权限（修改源码不推荐）</a>
                    
                        <small>(所属分类: <a href="/category/spring">spring</a>, <a href="/category/java">java</a>)</small>
                    
                </li>
                
                
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
                
                <li class="relatedPost" style="font-size: 12px;">
                    <a href="http://www.mixfate.com/spring/java/2016/05/16/spring-security-2.html">Spring Security配置使用介绍（二）动态配置权限</a>
                    
                        <small>(所属分类: <a href="/category/spring">spring</a>, <a href="/category/java">java</a>)</small>
                    
                </li>
                
                
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
                
                <li class="relatedPost" style="font-size: 12px;">
                    <a href="http://www.mixfate.com/spring/java/2016/05/15/spring-security.html">Spring Security配置使用介绍（一）简单配置</a>
                    
                        <small>(所属分类: <a href="/category/spring">spring</a>, <a href="/category/java">java</a>)</small>
                    
                </li>
                
                
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    

    
    
        
            
        
            
        
            
        
    


    </ul>
    </div>


<div class="PageNavigation" style="font-size: 12px;">
  
    <a class="prev pull-left" href="/mysql/tools/2016/05/01/mysql-install.html">&laquo; mysql windows绿色版使用，导入导出功能</a>
  
  
    <a class="next pull-right" href="/others/2016/05/03/others.html">善行天下，改变命运 &raquo;</a>
  
</div>
<div>&nbsp;</div>
<!--
<div class="disqus-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* <![CDATA[ */

        /*
		var disqus_shortname = "mixfate";
        var disqus_identifier = "http://www.mixfate.com_Dubbox的rest风格调用例子";
        var disqus_title = "Dubbox的rest风格调用例子";
		*/

        /* * * DON'T EDIT BELOW THIS LINE * * */
		/*
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
		*/
    /* ]]> */
    </script>
</div>
-->
</div>
				
				<!-- google adsense begin -->
				
				<!-- size_728x90 -->
				<ins class="adsbygoogle"
					 style="display:inline-block;width:728px;height:90px"
					 data-ad-client="ca-pub-4309621458849374"
					 data-ad-slot="8507601840"></ins>
				<script>
				(adsbygoogle = window.adsbygoogle || []).push({});
				</script>
				<!-- google adsense end -->
				
                <div class="row">
                  <div class="col-md-12 col-xs-12 footer">
                <footer>
                    © Copyright
                     
                    - Powered by Mixfate.
					<script language="javascript" type="text/javascript" src="http://js.users.51.la/18893327.js"></script>
					<noscript><a href="http://www.51.la/?18893327" target="_blank"><img alt="&#x6211;&#x8981;&#x5566;&#x514D;&#x8D39;&#x7EDF;&#x8BA1;" src="http://img.users.51.la/18893327.asp" style="border:none" /></a></noscript>
                    
                </footer>
            </div>
                </div>
            </div> <!-- end /.col-md-9 -->
        </div> <!-- end /.row -->

    </div> <!-- end /.container -->

        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <!--
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		-->
		<script src="http://www.mixfate.com/static/js/jquery.min.js"></script>
		<script src="http://www.mixfate.com/static/js/bootstrap.min.js"></script>
		
        <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        

        <script src="http://www.mixfate.com/static/js/thickbox-compressed.js"></script>
        <script src="http://www.mixfate.com/static/js/material.min.js"></script>
        <script src="http://www.mixfate.com/static/js/main.js"></script>
        <script src="http://www.mixfate.com/static/js/projects.js"></script>
    </body>
</html>
